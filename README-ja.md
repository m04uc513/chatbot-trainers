# BookBot2: Chatbot & Trainer for Reading stories to children

<div style="text-align: right;">
2022/01/21<BR>
藤田昭人
</div>

<BR><BR>

BookBot2 は、ノートルダム女子大学の実習教材を想定し、
「童話の読み聞かせのための音声チャットボット」
として、対話ルールの作成とそのルールによる読み聞かせをサポートする。

## 概要

ウェブアプリケーションとしての構成は以下の通り。

  * Glitch の hello-sqlite がベース
  * バックエンドは SQLite3 を使った Key/Value Store にチャットボットのルールデータを保存する
  * フロントエンドは次の３ページ
    - index.html: ホームページ。ルールの作成者の名前を入力し他のページに遷移する。
    - public/edit-rule.html: チャットボットのルールを作成するページ
    - public/whole.html: 作成したルール全体を閲覧するページ
    - public/reading-aloud.html: 読み聞かせのページ

なお、このアプリケーションは
[glitch](https://alive-fuchsia-runner.glitch.me/)
にて稼働している。


## アプリケーションについて

このアプリケーションは、
今後のＡＩチャットボットの社会への普及を想定しており、
その際に生起されるであろうＡＩと人間の役割分担について
学生に具体的に理解してもらう目的で作成された。

今日の機械学習を応用した応答文の生成技術を用いて
実用的な対話システムを構築するためには
大規模な対話コーパス（質問文＆応答文）が必要となる。
特定の対話状況に最適な対話コーパスを用意するためには、
その対話状況を想定した対話録を人為的に作成していくしかない。

このアプリケーションは
童話「シンデレラ」の読み聞かせを想定して、
単純なルールを記述することにより
物語の最中に任意のコメントや質問を発し、
質問の場合にはオーディエンスの反応にさらに応答する
音声チャットボットとして機能する。

学生は、ルール作成を通じて、
対話システムの実用性を高めるためには、
音声チャットボットが機能する状況をイメージして
より人間らしい受け答えと感じられる応答を
十分に用意しなければならないことを学ぶ。

## 対話ルール

このチャットボットでは ELIZA/ALICEbot の方式を参考に、
さらに単純化したルールにより応答文の生成を行っている。
次の３種類のメッセージを定義する。

* Message（MSG): 童話のひとつの段落を読み上げた直後に発話するメッセージ。
* Question-Answer Pair(QAP): 想定される反応とそれに返すメッセージ。
* Non Condition Answer(NCA): 想定が外れた場合に返すメッセージ。

MSG は童話の各段落ごとに１つだけ定義することができる。
段落にコメントするだけなら、QAPとNCAを定義する必要はない。

QAP は MSG が聴衆に対する質問文であった場合に、
聴衆から返ってくるであろう反応（Q）とそれに対する応答(A)をセットで定義する。
QAP は１つの MSG に対し最大３セットまで定義することができる。
ELIZA/ALICEbot と同じように Q を単語やフレーズにしておくと
より多くの反応に対して応答を返すことができる。

NCA は聴衆からの反応が QAP の定義に外れた場合に返す応答である。
せっかく反応があったのに、
チャットボットが何も応答しないと
聴衆はガッカリするだろう。

定義のパターンはおそらく次の３つだろう。

* MSG だけを定義する: チャットボットがこの段落にコメントするだけである。
* MSG/NCA を定義する: 聴衆からどんな反応があってもチャットボットが返すのは同じメッセージである。
* 全部定義する: ELIZA/ALICEbot 風のリアクションができるようになる？

定義できるルールが少数に限られているのは、
このアプリケーションを使った実習を授業中に行ったからである。
ルールの定義作業をシンプルにする目的だけでなく、
よく考えられたごく少数のルールを定義するだけでも、
チャットボットはそれ相応のリアクションを
演出できることを示したかった。


## 童話「シンデレラ」について

童話「シンデレラ」の原文は以下のサイトの文章を利用した。

[グリム童話 日英比較](https://www.grimmstories.com/language.php?grimm=021&l=ja&r=en)


## 授業について

授業は2021年11月〜12月に都合３回に分けて実施した。
学生は予想外に積極的に参加してくれた。
通常、ルールベースの対話システムの実習において
ルールを作成する課題を出すと、
ほとんどの学生が断念することが多いが、
今回は「童話の任意の段落について」との制約条件を設定したので、
ルールに取り込むべきトピックがグッと絞れたはずである。
学生は思い思いにルールをたくさん定義してくれた。

対話システムに敢えて「童話の読み聞かせ」という制約条件を
設定したことは正解だったように思う。


以上